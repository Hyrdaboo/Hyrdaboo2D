console.log("Hyrdaboo2D: engine active!"),console.log("Hyrdaboo2D:Make sure to create startGame() and updateGameArea() method. \nNOTE: To start engine you need to call myGameArea.start() function."),window.onload=function(){startGame()};var myGameArea={canvas:document.createElement("canvas"),start:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.context=this.canvas.getContext("2d"),document.body.insertBefore(this.canvas,document.body.childNodes[0]),this.interval=setInterval(updateGameArea,20),window.addEventListener("touchmove",function(t){myGameArea.x=t.touches[0].clientX,myGameArea.y=t.touches[0].clientY}),window.addEventListener("touchend",function(){myGameArea.x=!1,myGameArea.y=!1}),window.addEventListener("mousemove",function(t){myGameArea.x=t.pageX,myGameArea.y=t.pageY})},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},stop:function(){clearInterval(this.interval)}},camera={x:0,y:0},scale=1;function component(t,i,h,e,s,n){this.type=n,this.rotatable=!1,"textureMaterial"==n&&(this.image=new Image,this.image.src=h),this.width=t,this.height=i,this.x=e,this.y=s,this.angle=0,this.speedX=0,this.speedY=0,this.mass=1,this.addForce=0,this.acceleration=0,this.Mu=.1,this.color=h,this.strokeColor="black",this.gravity=0,this.gravitySpeed=0,this.touchTrace=!1,this.followMouse=!1,this.bounce=0,this.update=function(){ctx=myGameArea.context,1==this.rotatable?("textureMaterial"==n?(ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.angle*Math.PI/180),ctx.drawImage(this.image,this.width/-2,this.height/-2,this.width,this.height)):"circle"==n?(ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.angle*Math.PI/180),ctx.beginPath(),ctx.arc(this.width/-2,this.height/-2,this.width,0,2*Math.PI),ctx.fillStyle=this.color,ctx.fill(),ctx.lineWidth=this.height,ctx.strokeStyle=this.strokeColor,ctx.stroke()):(ctx.save(),ctx.translate(this.x,this.y),ctx.rotate(this.angle*Math.PI/180),ctx.fillStyle=h,ctx.fillRect(this.width/-2,this.height/-2,this.width,this.height)),ctx.restore()):"textureMaterial"==n?ctx.drawImage(this.image,this.x,this.y,this.width,this.height):"circle"==n?(ctx.beginPath(),ctx.arc(this.x,this.y,this.width,0,2*Math.PI),ctx.fillStyle=this.color,ctx.fill(),ctx.lineWidth=this.height,ctx.strokeStyle=this.strokeColor,ctx.stroke()):(ctx.fillStyle=h,ctx.fillRect(this.x,this.y,this.width,this.height))},this.newPos=function(){this.gravitySpeed+=this.gravity*this.mass,this.addForce+=this.acceleration*this.mass,this.friction=this.Mu*this.mass,this.width=t*scale,this.height=i*scale,this.x+=this.speedX+this.addForce-camera.x,this.y+=this.speedY+this.gravitySpeed-camera.y,this.follow(),this.frictionForce()},this.frictionForce=function(){0==this.acceleration&&(0<this.addForce?this.addForce-=this.friction:this.addForce<0&&(this.addForce+=this.friction),this.addForce<this.friction&&this.addForce>-this.friction&&(this.addForce=0))},this.boxCircleColliding=function(t){var i=Math.abs(t.x-(this.x+this.width/2)),h=Math.abs(t.y-(this.y+this.height/2));return!(i>t.width+this.width/2)&&(!(h>t.width+this.height/2)&&(i<=this.width||(h<=this.height||(i-=this.width)*i+(h-=this.height)*h<=t.width*t.width)))},this.circleColliding=function(t){var i=this.x-t.x,h=this.y-t.y,t=this.width+t.width;let e=i*i+h*h<=t*t?!0:!1;return e},this.crashWith=function(t){var i=this.x,h=this.x+this.width,e=this.y,s=this.y+this.height,a=t.x,r=t.x+t.width,d=t.y,t=t.y+t.height;let c=s<d||t<e||h<a||r<i?!1:!0;return c},this.boxColliding=function(i){if(1==this.rotatable){var h=this.x-this.width/2,e=this.x-this.width/2+this.width,s=this.y-this.height/2,a=this.y-this.height/2+this.height,r=i.x,d=i.x+i.width,c=i.y,n=i.y+i.height;let t=!1;return r<e&&h<r&&a>c+i.height/2&&s<n-i.height/2&&(this.x=i.x-this.width+this.width/2,this.speedX=0,this.addForce=0,t=!0),h<d&&d<e&&a>c+i.height/2&&s<n-i.height/2&&(this.x=i.x+i.width+this.width/2,this.speedX=0,this.addForce=0,t=!0),s<n&&n<a&&h<d&&r<e&&(this.y=i.y+i.height+this.height/2,this.speedY=0,t=!0),c<a&&s<c&&h<d-10&&r+10<e&&(this.y=i.y-this.height+this.height/2,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),t}{n=this.x,a=this.x+this.width,s=this.y,c=this.y+this.height,h=i.x,d=i.x+i.width,r=i.y,e=i.y+i.height;let t=!1;return h<a&&n<h&&c>r+i.height/2&&s<e-i.height/2&&(this.x=i.x-this.width,this.speedX=0,this.addForce=0,t=!0),n<d&&d<a&&c>r+i.height/2&&s<e-i.height/2&&(this.x=i.x+i.width,this.speedX=0,this.addForce=0,t=!0),s<e&&e<c&&n<d&&h<a&&(this.y=i.y+i.height,this.speedY=0,t=!0),r<c&&s<r&&n<d-10&&h+10<a&&(this.y=i.y-this.height,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),t}},this.clicked=function(){if(1==this.rotatable){var i=this.width/-2,h=this.width/-2+this.width,e=this.height/-2,s=this.height/-2+this.height;let t=!0;return(s<myGameArea.y||e>myGameArea.y||h<myGameArea.x||i>myGameArea.x)&&(t=!1),t}{s=this.x,e=this.x+this.width,h=this.y,i=this.y+this.height;let t=!0;return(i<myGameArea.y||h>myGameArea.y||e<myGameArea.x||s>myGameArea.x)&&(t=!1),t}},this.follow=function(){myGameArea.x&&myGameArea.y&&1==this.touchTrace&&(this.x=myGameArea.x-this.width/2,this.y=myGameArea.y-this.width/2,this.gravitySpeed=0),myGameArea.x&&myGameArea.y&&1==this.followMouse&&(this.x=myGameArea.x-this.width/2,this.y=myGameArea.y-this.width/2,this.gravitySpeed=0)},this.hitCanvasEdge=function(){if(1==this.rotatable){var i=myGameArea.canvas.height-(this.width+this.height/-2),h=myGameArea.canvas.height-myGameArea.canvas.height+(this.width+this.height/-2),e=myGameArea.canvas.width-myGameArea.canvas.width+(this.width+this.height/-2),s=myGameArea.canvas.width-(this.width+this.height/-2);let t=!1;return this.y>i&&(this.y=i,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.y<h&&(this.y=h,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.x>s&&(this.x=s,this.addForce=0,t=!0),this.x<e&&(this.x=e,this.addForce=0,t=!0),t}if("circle"!=n){var a=myGameArea.canvas.height-this.height,r=myGameArea.canvas.height-myGameArea.canvas.height,d=myGameArea.canvas.width-myGameArea.canvas.width,c=myGameArea.canvas.width-this.width;let t=!1;return this.y>a&&(this.y=a,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.y<r&&(this.y=r,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.x>c&&(this.x=c,this.addForce=0,t=!0),this.x<d&&(this.x=d,this.addForce=0,t=!0),t}{a=myGameArea.canvas.height-(this.width+this.height/2),r=myGameArea.canvas.height-myGameArea.canvas.height+(this.width+this.height/2),c=myGameArea.canvas.width-myGameArea.canvas.width+(this.width+this.height/2),d=myGameArea.canvas.width-(this.width+this.height/2);let t=!1;return this.y>a&&(this.y=a,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.y<r&&(this.y=r,this.speedY=0,this.gravitySpeed=-(this.gravitySpeed*this.bounce),t=!0),this.x>d&&(this.x=d,this.addForce=0,t=!0),this.x<c&&(this.x=c,this.addForce=0,t=!0),t}}}function viewFullscreen(t){clearInterval(myGameArea.interval),document.documentElement.requestFullscreen(),screen.orientation.lock(t),startGame()}function setVibration(t){window.navigator.vibrate(t)}
